"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}require("./style.css");var THREE=_interopRequireWildcard(require("three")),dat=_interopRequireWildcard(require("dat.gui")),_gsap=_interopRequireDefault(require("gsap")),_statsModule=_interopRequireDefault(require("three/addons/libs/stats.module.js")),_OrbitControls=require("three/addons/controls/OrbitControls"),_GLTFLoader=require("three/examples/jsm/loaders/GLTFLoader"),_DRACOLoader=require("three/examples/jsm/loaders/DRACOLoader"),_FontLoader=require("three/addons/loaders/FontLoader.js"),_TextGeometry=require("three/addons/geometries/TextGeometry.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=a?Object.getOwnPropertyDescriptor(e,n):null;r&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]}return o.default=e,t&&t.set(e,o),o}function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,a)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(o,!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var mixer,theme="light",bookCover=null,lightSwitch=null,titleText=null,subtitleText=null,isMobile=window.matchMedia("(max-width: 992px)").matches,canvas=document.querySelector(".experience-canvas"),loaderWrapper=document.getElementById("loader-wrapper"),clipNames=["fan_rotation","fan_rotation.001","fan_rotation.002","fan_rotation.003","fan_rotation.004"],projects=[{image:"textures/project-spaze.webp",url:"https://www.spaze.social/"},{image:"textures/project-myteachers.jpg",url:"https://myteachers.com.au/"},{image:"textures/project-wholesale.jpg",url:"https://wholesale.com.np/"},{image:"textures/project-pelotero.jpg",url:"https://www.peloterosenlaweb.com/"}],aboutCameraPos={x:.12,y:.2,z:.55},aboutCameraRot={x:-1.54,y:.13,z:1.41},projectsCameraPos={x:1,y:.45,z:.01},projectsCameraRot={x:.05,y:.05,z:0},scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,1e3),defaultCameraPos={x:1.009028643133046,y:.5463638814987481,z:.4983449671971262},defaultCamerRot={x:-.8313297556598935,y:.9383399492446749,z:.7240714481613063};camera.position.set(defaultCameraPos.x,defaultCameraPos.y,defaultCameraPos.z);var renderer=new THREE.WebGLRenderer({canvas:canvas,antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight),renderer.setPixelRatio(window.devicePixelRatio),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap;var controls=new _OrbitControls.OrbitControls(camera,renderer.domElement);controls.enablePan=!1,controls.minDistance=.9,controls.maxDistance=1.6,controls.minAzimuthAngle=.2,controls.maxAzimuthAngle=.78*Math.PI,controls.minPolarAngle=.3,controls.maxPolarAngle=Math.PI/2,controls.update();var dracoLoader=new _DRACOLoader.DRACOLoader;dracoLoader.setDecoderPath("draco/");var gltfLoader=new _GLTFLoader.GLTFLoader;gltfLoader.setDRACOLoader(dracoLoader),gltfLoader.load("models/room.glb",function(e){loaderWrapper.style.display="none";var o=document.createElement("video");o.src="textures/arcane.mp4",o.muted=!0,o.playsInline=!0,o.autoplay=!0,o.loop=!0;var a=new THREE.VideoTexture(o);a.minFilter=THREE.NearestFilter,a.magFilter=THREE.NearestFilter,a.generateMipmaps=!1,a.encoding=THREE.sRGBEncoding,e.scene.children.forEach(function(e){if("Wall"!==e.name&&(e.castShadow=!0),e.receiveShadow=!0,e.children&&e.children.forEach(function(e){"Book001"!==e.name&&"Switch"!==e.name&&(e.castShadow=!0),e.receiveShadow=!0}),"Stand"===e.name&&(e.children[0].material=new THREE.MeshBasicMaterial({map:a}),o.play()),"CPU"===e.name&&(e.children[0].material=new THREE.MeshPhysicalMaterial,e.children[0].material.roughness=0,e.children[0].material.color.set(10066329),e.children[0].material.ior=3,e.children[0].material.transmission=2,e.children[0].material.opacity=.8,e.children[0].material.depthWrite=!1,e.children[0].material.depthTest=!1,e.children[1].material=new THREE.MeshPhysicalMaterial,e.children[1].material.roughness=0,e.children[1].material.color.set(10066329),e.children[1].material.ior=3,e.children[1].material.transmission=1,e.children[1].material.opacity=.8,e.children[1].material.depthWrite=!1,e.children[1].material.depthTest=!1),"Book"===e.name){bookCover=e.children[0];var t=(new THREE.TextureLoader).load("textures/book-inner.png");t.flipY=!1,e.material=new THREE.MeshStandardMaterial({color:16514043,map:t})}"SwitchBoard"===e.name&&(lightSwitch=e.children[0])}),scene.add(e.scene),animate(),mixer=new THREE.AnimationMixer(e.scene);var n=e.animations;clipNames.forEach(function(e){var t=THREE.AnimationClip.findByName(n,e);t&&mixer.clipAction(t).play()}),loadIntroText(),logoListener(),aboutMenuListener(),projectsMenuListener(),init3DWorldClickListeners(),initResponsive(e.scene)},function(e){console.error(e)});var ambientLight=new THREE.AmbientLight(16777215,.6);scene.add(ambientLight);var roomLight=new THREE.PointLight(16777215,2.5,10);roomLight.position.set(.3,2,.5),roomLight.castShadow=!0,roomLight.shadow.radius=5,roomLight.shadow.mapSize.width=2048,roomLight.shadow.mapSize.height=2048,roomLight.shadow.camera.far=2.5,roomLight.shadow.bias=-.002,scene.add(roomLight);var fanLight1=new THREE.PointLight(16711680,30,.2),fanLight2=new THREE.PointLight(65280,30,.12),fanLight3=new THREE.PointLight(65280,30,.2),fanLight4=new THREE.PointLight(65280,30,.2),fanLight5=new THREE.PointLight(65280,30,.05);fanLight1.position.set(0,.29,-.29),fanLight2.position.set(-.15,.29,-.29),fanLight3.position.set(.21,.29,-.29),fanLight4.position.set(.21,.19,-.29),fanLight5.position.set(.21,.08,-.29),scene.add(fanLight1),scene.add(fanLight2),scene.add(fanLight3),scene.add(fanLight4),scene.add(fanLight5);var pointLight1=new THREE.PointLight(16711680,0,1.1),pointLight2=new THREE.PointLight(16711680,0,1.1),pointLight3=new THREE.PointLight(16711680,0,1.1),pointLight4=new THREE.PointLight(16711680,0,1.1);pointLight1.position.set(-.2,.6,.24),pointLight2.position.set(-.2,.6,.42),pointLight3.position.set(-.2,.6,.01),pointLight4.position.set(-.2,.6,-.14),scene.add(pointLight1),scene.add(pointLight2),scene.add(pointLight3),scene.add(pointLight4);var clock=new THREE.Clock;function animate(){requestAnimationFrame(animate),mixer&&mixer.update(clock.getDelta()),renderer.render(scene,camera)}function loadIntroText(){var e=new _FontLoader.FontLoader;e.load("fonts/unione.json",function(e){var t=[new THREE.MeshPhongMaterial({color:1515303,flatShading:!0}),new THREE.MeshPhongMaterial({color:16777215})],o=new _TextGeometry.TextGeometry("KIOHOCCODE",{font:e,size:.08,height:.01});(titleText=new THREE.Mesh(o,t)).rotation.y=.5*Math.PI,titleText.position.set(-.27,.55,.5),scene.add(titleText)}),e.load("fonts/helvatica.json",function(e){var t=[new THREE.MeshPhongMaterial({color:1515303,flatShading:!0}),new THREE.MeshPhongMaterial({color:16777215})],o=new _TextGeometry.TextGeometry("Web Designer / Developer / Content Creator / Game Dev",{font:e,size:.018,height:0});(subtitleText=new THREE.Mesh(o,t)).rotation.y=.5*Math.PI,subtitleText.position.set(-.255,.5,.5),scene.add(subtitleText)})}function switchTheme(e){"dark"===e?(lightSwitch.rotation.z=Math.PI/7,document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),_gsap.default.to(roomLight.color,{r:.2725490196078431,g:.23137254901960785,b:.6862745098039216}),_gsap.default.to(ambientLight.color,{r:.17254901960784313,g:.23137254901960785,b:.6862745098039216}),_gsap.default.to(roomLight,{intensity:1.5}),_gsap.default.to(ambientLight,{intensity:.3}),_gsap.default.to(fanLight5,{distance:.07}),_gsap.default.to(titleText.material[0].color,{r:8,g:8,b:8,duration:0}),_gsap.default.to(titleText.material[1].color,{r:5,g:5,b:5,duration:0}),_gsap.default.to(subtitleText.material[0].color,{r:8,g:8,b:8,duration:0}),_gsap.default.to(subtitleText.material[1].color,{r:5,g:5,b:5,duration:0}),_gsap.default.to(pointLight1,{intensity:.6}),_gsap.default.to(pointLight2,{intensity:.6}),_gsap.default.to(pointLight3,{intensity:.6}),_gsap.default.to(pointLight4,{intensity:.6})):(lightSwitch.rotation.z=0,document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),_gsap.default.to(roomLight.color,{r:1,g:1,b:1}),_gsap.default.to(ambientLight.color,{r:1,g:1,b:1}),_gsap.default.to(roomLight,{intensity:2.5}),_gsap.default.to(ambientLight,{intensity:.6}),_gsap.default.to(fanLight5,{distance:.05}),_gsap.default.to(titleText.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),_gsap.default.to(titleText.material[1].color,{r:1,g:1,b:1,duration:0}),_gsap.default.to(subtitleText.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),_gsap.default.to(subtitleText.material[1].color,{r:1,g:1,b:1,duration:0}),_gsap.default.to(pointLight1,{intensity:0}),_gsap.default.to(pointLight2,{intensity:0}),_gsap.default.to(pointLight3,{intensity:0}),_gsap.default.to(pointLight4,{intensity:0}))}function enableOrbitControls(){controls.enabled=!0}function disableOrbitControls(){controls.enabled=!1}function enableCloseBtn(){document.getElementById("close-btn").style.display="block"}function disableCloseBtn(){document.getElementById("close-btn").style.display="none"}function resetBookCover(){bookCover&&_gsap.default.to(bookCover.rotation,{x:0,duration:1.5})}function resetProjects(){0!==projects.length&&projects.forEach(function(e,t){_gsap.default.to(e.mesh.material,{opacity:0,duration:1}),_gsap.default.to(e.mesh.position,{y:e.y,duration:1}),_gsap.default.to(e.mesh.scale,{x:0,y:0,z:0,duration:0,delay:1})})}function resetCamera(){resetBookCover(),resetProjects(),disableCloseBtn(),_gsap.default.to(camera.position,_objectSpread({},defaultCameraPos,{duration:1.5})),_gsap.default.to(camera.rotation,_objectSpread({},defaultCamerRot,{duration:1.5})),_gsap.default.delayedCall(1.5,enableOrbitControls),"dark"!==theme&&_gsap.default.to(roomLight,{intensity:2.5,duration:1.5})}function logoListener(){document.getElementById("logo").addEventListener("click",function(e){e.preventDefault(),resetCamera()})}function cameraToAbout(){bookCover&&(_gsap.default.to(camera.position,_objectSpread({},aboutCameraPos,{duration:1.5})),_gsap.default.to(camera.rotation,_objectSpread({},aboutCameraRot,{duration:1.5})),_gsap.default.to(bookCover.rotation,{x:Math.PI,duration:1.5,delay:1.5}),"dark"!==theme&&_gsap.default.to(roomLight,{intensity:1,duration:1.5}))}function aboutMenuListener(){document.getElementById("about-menu").addEventListener("click",function(e){e.preventDefault(),disableOrbitControls(),resetProjects(),cameraToAbout(),_gsap.default.delayedCall(1.5,enableCloseBtn)})}function projectsMenuListener(){projects.forEach(function(e,t){var o=t%3==0?0:1,a=Math.floor(t/3),n=new THREE.PlaneGeometry(.71,.4),r=new THREE.MeshBasicMaterial({color:16777215,map:(new THREE.TextureLoader).load(e.image),transparent:!0,opacity:0}),i=new THREE.Mesh(n,r);i.name="project",i.userData={url:e.url},i.position.set(.3+.8*t*o,1-.5*a,-1.15),i.scale.set(0,0,0),projects[t].mesh=i,projects[t].y=1-.5*a,scene.add(i)}),document.getElementById("projects-menu").addEventListener("click",function(e){e.preventDefault(),disableOrbitControls(),resetBookCover(),_gsap.default.to(camera.position,_objectSpread({},projectsCameraPos,{duration:1.5})),_gsap.default.to(camera.rotation,_objectSpread({},projectsCameraRot,{duration:1.5})),_gsap.default.delayedCall(1.5,enableCloseBtn),projects.forEach(function(e,t){e.mesh.scale.set(1,1,1),_gsap.default.to(e.mesh.material,{opacity:1,duration:1.5,delay:1.5+.1*t}),_gsap.default.to(e.mesh.position,{y:e.y+.05,duration:1,delay:1.5+.1*t})})})}function init3DWorldClickListeners(){var n=new THREE.Vector2,r=new THREE.Raycaster;window.addEventListener("click",function(e){var t="light"===theme?"dark":"light",o=document.getElementById("close-btn"),a=document.getElementById("projects-menu");if(e.target===o||o.contains(e.target)||e.target===a||a.contains(e.target))return!1;n.x=e.clientX/window.innerWidth*2-1,n.y=-e.clientY/window.innerHeight*2+1,r.setFromCamera(n,camera),r.intersectObjects(scene.children).forEach(function(e){"project"===e.object.name&&e.object.userData.url&&window.open(e.object.userData.url),"Book"!==e.object.name&&"Book001"!==e.object.name||(disableOrbitControls(),cameraToAbout(),_gsap.default.delayedCall(1.5,enableCloseBtn)),"SwitchBoard"!==e.object.name&&"Switch"!==e.object.name||switchTheme(theme=t)})})}function initResponsive(e){isMobile&&(e.scale.set(.95,.95,.95),aboutCameraPos={x:.09,y:.23,z:.51},aboutCameraRot={x:-1.57,y:0,z:1.57},projectsCameraPos={x:1.1,y:.82,z:.5},projectsCameraRot={x:0,y:0,z:1.55},projects.forEach(function(e,t){e.mesh.position.z=-1.13}),controls.maxDistance=1.5,controls.maxAzimuthAngle=.75*Math.PI)}document.getElementById("close-btn").addEventListener("click",function(e){e.preventDefault(),resetCamera()}),document.getElementById("contact-btn").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".contact-menu__dropdown").classList.toggle("contact-menu__dropdown--open")}),document.addEventListener("mouseup",function(e){var t=document.querySelector(".contact-menu");t.contains(e.target)||t.querySelector(".contact-menu__dropdown").classList.remove("contact-menu__dropdown--open")}),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)});
//# sourceMappingURL=main.min.js.map
